<!DOCTYPE html>
<html>
<head><title>Detailed Timetable for {{ stream.name }}</title></head>
<body>
<h1>Detailed Timetable - {{ stream.name }}</h1>
<table border="1" cellspacing="0" cellpadding="5">
    <tr>
        <th>Period</th>
        <th>Day</th>
        <th>Time</th>
        <th>Subject</th>
        <th>Professor</th>
        <th>Location</th>
    </tr>
    {% for lesson in lessons %}
        {% for slot in slots_by_lesson|default:{}|dict_get:lesson.id %}
            <tr>
                <td>{{ lesson.number }}</td>
                <td>{{ lesson.get_day_display }}</td>
                <td>{{ lesson.start_time }} - {{ lesson.end_time }}</td>
                <td>{{ slot.subject.name }}</td>
                <td>{{ slot.professor.name }}</td>
                <td>{{ slot.location }}</td>
            </tr>
        {% empty %}
            <tr>
                <td>{{ lesson.number }}</td>
                <td>{{ lesson.get_day_display }}</td>
                <td>{{ lesson.start_time }} - {{ lesson.end_time }}</td>
                <td colspan="3">No lecture scheduled</td>
            </tr>
        {% endfor %}
    {% endfor %}
</table>
<a href="{% url 'stream_list' stream.department.id %}">Back to Streams</a>
</body>
</html>
